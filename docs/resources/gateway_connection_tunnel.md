---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "upcloud_gateway_connection_tunnel Resource - terraform-provider-upcloud"
subcategory: Network
description: |-
  
---

# upcloud_gateway_connection_tunnel (Resource)



## Example Usage

```terraform
resource "upcloud_router" "this" {
  name = "gateway-example-router"

  # UpCloud Network Gateway Service will add a static route to this router to ensure gateway networking is working as intended.
  # You need to ignore changes to it, otherwise TF will attempt to remove the static routes on subsequent applies
  lifecycle {
    ignore_changes = [static_route]
  }
}

resource "upcloud_network" "this" {
  name = "gateway-example-net"
  zone = "pl-waw1"

  ip_network {
    address = "172.16.2.0/24"
    dhcp    = true
    family  = "IPv4"
  }

  router = upcloud_router.this.id
}

resource "upcloud_gateway" "this" {
  name = "gateway-example-gw"
  zone = "pl-waw1"

  # Note that VPN feature is currently in beta phase.
  # Also not all VPN plans allow VPN feature.
  # For more info see https://upcloud.com/resources/docs/networking#nat-and-vpn-gateways
  features = ["vpn"]
  plan     = "advanced"

  router {
    id = upcloud_router.this.id
  }
}

resource "upcloud_gateway_connection" "this" {
  gateway = upcloud_gateway.this.id
  name    = "test-connection"
  type    = "ipsec"

  local_route {
    name           = "local-route"
    type           = "static"
    static_network = "10.123.123.0/24"
  }

  remote_route {
    name           = "remote-route"
    type           = "static"
    static_network = "100.123.123.0/24"
  }
}

resource "upcloud_gateway_connection_tunnel" "this" {
  connection_id      = upcloud_gateway_connection.this.id
  name               = "test-tunnel"
  local_address_name = tolist(upcloud_gateway.this.address).0.name
  remote_address     = "100.123.123.10"

  ipsec_auth_psk {
    psk = "you_probably_want_to_use_env_vars_here"
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required Attributes

- `connection_id` (String) ID of the upcloud_gateway_connection resource to which the tunnel belongs
- `local_address_name` (String) Public (UpCloud) endpoint address of this tunnel
- `name` (String) The name of the tunnel, should be unique within the connection
- `remote_address` (String) Remote public IP address of the tunnel

### Blocks

- `ipsec_auth_psk` (Block List, Min: 1, Max: 1) Configuration for authenticating with pre-shared key (see [below for nested schema](#nestedblock--ipsec_auth_psk))
- `ipsec_properties` (Block List, Max: 1) IPsec configuration for the tunnel (see [below for nested schema](#nestedblock--ipsec_properties))

### Read-Only

- `id` (String) The ID of this resource.
- `operational_state` (String) Tunnel's current operational, effective state
- `uuid` (String) The UUID of the tunnel

<a id="nestedblock--ipsec_auth_psk"></a>
### Nested Schema for `ipsec_auth_psk`

Required Attributes:

- `psk` (String, Sensitive) The pre-shared key. This value is only used during resource creation and is not returned in the state. It is not possible to update this value. If you need to update it, delete the connection and create a new one.


<a id="nestedblock--ipsec_properties"></a>
### Nested Schema for `ipsec_properties`

Optional Attributes:

- `child_rekey_time` (Number) IKE child SA rekey time in seconds.
- `dpd_delay` (Number) Delay before sending Dead Peer Detection packets if no traffic is detected, in seconds.
- `dpd_timeout` (Number) Timeout period for DPD reply before considering the peer to be dead, in seconds.
- `ike_lifetime` (Number) Maximum IKE SA lifetime in seconds.
- `phase1_algorithms` (Set of String) List of Phase 1: Proposal algorithms.
- `phase1_dh_group_numbers` (Set of Number) List of Phase 1 Diffie-Hellman group numbers.
- `phase1_integrity_algorithms` (Set of String) List of Phase 1 integrity algorithms.
- `phase2_algorithms` (Set of String) List of Phase 2: Security Association algorithms.
- `phase2_dh_group_numbers` (Set of Number) List of Phase 2 Diffie-Hellman group numbers.
- `phase2_integrity_algorithms` (Set of String) List of Phase 2 integrity algorithms.
- `rekey_time` (Number) IKE SA rekey time in seconds.
