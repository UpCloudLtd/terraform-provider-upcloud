---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "upcloud_kubernetes_node_group Resource - terraform-provider-upcloud"
subcategory: Kubernetes
description: |-
  This resource represents a Managed Kubernetes https://upcloud.com/products/managed-kubernetes cluster.
---

# upcloud_kubernetes_node_group (Resource)

This resource represents a [Managed Kubernetes](https://upcloud.com/products/managed-kubernetes) cluster.

## Example Usage

```terraform
# Create a network for the Kubernetes cluster
resource "upcloud_network" "example" {
  name = "example-network"
  zone = "de-fra1"
  ip_network {
    address = "172.16.1.0/24"
    dhcp    = true
    family  = "IPv4"
  }

  # UpCloud Kubernetes Service will add a router to this network to ensure cluster networking is working as intended.
  # You need to ignore changes to it, otherwise TF will attempt to detach the router on subsequent applies
  lifecycle {
    ignore_changes = [router]
  }
}

# Create a Kubernetes cluster
resource "upcloud_kubernetes_cluster" "example" {
  # Allow access to the cluster control plane from any external source.
  control_plane_ip_filter = ["0.0.0.0/0"]
  name                    = "exampleapp"
  network                 = upcloud_network.example.id
  zone                    = "de-fra1"
}

# Create a Kubernetes cluster node group
resource "upcloud_kubernetes_node_group" "group" {
  cluster    = resource.upcloud_kubernetes_cluster.example.id
  node_count = 2
  name       = "medium"
  plan       = "2xCPU-4GB"

  labels = {
    managedBy = "terraform"
  }

  taint {
    effect = "NoExecute"
    key    = "taintKey"
    value  = "taintValue"
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required Attributes

- `cluster` (String) UUID of the cluster.
- `name` (String) The name of the node group. Needs to be unique within a cluster.
- `node_count` (Number) Amount of nodes to provision in the node group.
- `plan` (String) The server plan used for the node group. You can list available plans with `upctl server plans`

### Optional Attributes

- `anti_affinity` (Boolean) If set to true, nodes in this group will be placed on separate compute hosts. Please note that anti-affinity policy is considered 'best effort' and enabling it does not fully guarantee that the nodes will end up on different hardware.
- `labels` (Map of String) User defined key-value pairs to classify the node_group.
- `ssh_keys` (Set of String) You can optionally select SSH keys to be added as authorized keys to the nodes in this node group. This allows you to connect to the nodes via SSH once they are running.
- `storage_encryption` (String) The storage encryption strategy to use for the nodes in this group. If not set, the cluster's storage encryption strategy will be used, if applicable.
- `utility_network_access` (Boolean) If set to false, nodes in this group will not have access to utility network.

### Blocks

- `custom_plan` (Block List) Resource properties for custom plan (see [below for nested schema](#nestedblock--custom_plan))
- `kubelet_args` (Block Set) Additional arguments for kubelet for the nodes in this group. WARNING - those arguments will be passed directly to kubelet CLI on each worker node without any validation. Passing invalid arguments can break your whole cluster. Be extra careful when adding kubelet args. (see [below for nested schema](#nestedblock--kubelet_args))
- `taint` (Block Set) Taints for the nodes in this group. (see [below for nested schema](#nestedblock--taint))

### Read-Only

- `id` (String) Computed ID of the node group. This is a combination of the cluster UUID and the node group name, separated with a `/`.

<a id="nestedblock--custom_plan"></a>
### Nested Schema for `custom_plan`

Required Attributes:

- `cores` (Number) The number of CPU cores dedicated to individual node group nodes when using custom plan
- `memory` (Number) The amount of memory in megabytes to assign to individual node group node when using custom plan. Value needs to be divisible by 1024.
- `storage_size` (Number) The size of the storage device in gigabytes.

Optional Attributes:

- `storage_tier` (String) The storage tier to use. Defaults to maxiops


<a id="nestedblock--kubelet_args"></a>
### Nested Schema for `kubelet_args`

Required Attributes:

- `key` (String) Kubelet argument key.
- `value` (String) Kubelet argument value.


<a id="nestedblock--taint"></a>
### Nested Schema for `taint`

Required Attributes:

- `effect` (String) Taint effect.
- `key` (String) Taint key.
- `value` (String) Taint value.
