---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "upcloud_gateway_connection Resource - terraform-provider-upcloud"
subcategory: Network
description: |-
  
---

# upcloud_gateway_connection (Resource)



## Example Usage

```terraform
resource "upcloud_router" "this" {
  name = "gateway-example-router"

  # UpCloud Network Gateway Service will add a static route to this router to ensure gateway networking is working as intended.
  # You need to ignore changes to it, otherwise TF will attempt to remove the static routes on subsequent applies
  lifecycle {
    ignore_changes = [static_route]
  }
}

resource "upcloud_network" "this" {
  name = "gateway-example-net"
  zone = "pl-waw1"

  ip_network {
    address = "172.16.2.0/24"
    dhcp    = true
    family  = "IPv4"
  }

  router = upcloud_router.this.id
}

resource "upcloud_gateway" "this" {
  name = "gateway-example-gw"
  zone = "pl-waw1"

  # Note that VPN feature is currently in beta phase.
  # Also not all VPN plans allow VPN feature.
  # For more info see https://upcloud.com/resources/docs/networking#nat-and-vpn-gateways
  features = ["vpn"]
  plan     = "advanced"

  router {
    id = upcloud_router.this.id
  }
}

resource "upcloud_gateway_connection" "this" {
  gateway = upcloud_gateway.this.id
  name    = "test-connection"
  type    = "ipsec"

  local_route {
    name           = "local-route"
    type           = "static"
    static_network = "10.123.123.0/24"
  }

  remote_route {
    name           = "remote-route"
    type           = "static"
    static_network = "100.123.123.0/24"
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required Attributes

- `gateway` (String) The ID of the upcloud_gateway resource to which the connection belongs.
- `name` (String) The name of the connection, should be unique within the gateway.

### Optional Attributes

- `type` (String) The type of the connection; currently the only supported type is 'ipsec'.

### Blocks

- `local_route` (Block Set) Route for the UpCloud side of the network. (see [below for nested schema](#nestedblock--local_route))
- `remote_route` (Block Set) Route for the remote side of the network. (see [below for nested schema](#nestedblock--remote_route))

### Read-Only

- `id` (String) The ID of this resource.
- `tunnels` (List of String) List of connection's tunnels names. Note that this field can have outdated information as connections are created by a separate resource. To make sure that you have the most recent data run 'terrafrom refresh'.

<a id="nestedblock--local_route"></a>
### Nested Schema for `local_route`

Required Attributes:

- `name` (String) Name of the route
- `static_network` (String) Destination prefix of the route; needs to be a valid IPv4 prefix

Optional Attributes:

- `type` (String) Type of route; currently the only supported type is 'static'


<a id="nestedblock--remote_route"></a>
### Nested Schema for `remote_route`

Required Attributes:

- `name` (String) Name of the route
- `static_network` (String) Destination prefix of the route; needs to be a valid IPv4 prefix

Optional Attributes:

- `type` (String) Type of route; currently the only supported type is 'static'
